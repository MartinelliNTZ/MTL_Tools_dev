# üìò An√°lise de Cen√°rio ‚Äì Ferramenta Copiar Atributos

## Vis√£o Geral
A ferramenta **Copiar Atributos** foi desenvolvida para transferir campos entre camadas vetoriais de forma segura, previs√≠vel e integrada ao fluxo do **MTL Tools**, atuando diretamente sobre a camada destino e mantendo controle expl√≠cito sobre edi√ß√£o e salvamento.

---

## Objetivo da Ferramenta
Resolver cen√°rios em que:

- √â necess√°rio replicar atributos entre camadas semelhantes
- Camadas possuem estruturas parcialmente compat√≠veis
- O usu√°rio precisa decidir manualmente quais campos copiar
- Conflitos de nomes de campos precisam ser tratados de forma interativa

A ferramenta evita duplica√ß√µes de camadas e opera√ß√µes irrevers√≠veis.

---

## Cen√°rios de Uso

### 1Ô∏è‚É£ Execu√ß√£o com sele√ß√£o manual de atributos

**Situa√ß√£o**
- O usu√°rio desmarca a op√ß√£o ‚ÄúUsar todos os atributos‚Äù
- Seleciona manualmente os campos desejados

**Comportamento**
- Apenas os campos marcados s√£o copiados
- A ordem e o tipo dos campos s√£o preservados

**Resultado**
- Controle total sobre os dados transferidos
- Evita polui√ß√£o de atributos desnecess√°rios

---

### 2Ô∏è‚É£ Execu√ß√£o usando todos os atributos

**Situa√ß√£o**
- A op√ß√£o ‚ÄúUsar todos os atributos‚Äù est√° marcada

**Comportamento**
- Todos os campos da camada origem s√£o copiados
- A lista de atributos √© ignorada

**Resultado**
- Execu√ß√£o mais r√°pida
- Ideal para camadas com estruturas compat√≠veis

---

### 3Ô∏è‚É£ Conflito de nomes de campos

**Situa√ß√£o**
- Um campo da origem j√° existe na camada destino

**Comportamento**
- A ferramenta solicita ao usu√°rio uma decis√£o
- A resolu√ß√£o √© feita campo a campo

**Resultado**
- Evita sobrescritas acidentais
- Garante previsibilidade da estrutura final

---

### 4Ô∏è‚É£ Camada destino j√° em modo de edi√ß√£o

**Situa√ß√£o**
- A camada destino j√° estava em edi√ß√£o

**Comportamento**
- A ferramenta respeita o estado atual
- Nenhuma tentativa autom√°tica de salvamento √© feita

**Resultado**
- Integra√ß√£o segura com fluxos manuais de edi√ß√£o

---

### 5Ô∏è‚É£ Camada destino fora do modo de edi√ß√£o

**Situa√ß√£o**
- A camada destino n√£o estava em edi√ß√£o

**Comportamento**
- A ferramenta inicia a edi√ß√£o
- O usu√°rio decide salvar ou descartar ao final

**Resultado**
- Prote√ß√£o contra altera√ß√µes n√£o intencionais

---

## Comportamento da Interface (UI)

### Sele√ß√£o de camadas
- Camada ativa √© automaticamente sugerida como destino
- Drag & drop permite troca r√°pida de camadas
- Clique no campo atualiza dinamicamente a lista

---

### Sele√ß√£o de atributos
- Lista suporta sele√ß√£o m√∫ltipla (Ctrl / Shift)
- Bot√µes de sele√ß√£o seguem padr√£o do QGIS:
  - A√ß√£o aplicada apenas aos itens selecionados
  - Caso nenhum esteja selecionado, aplica a todos

Essa abordagem melhora significativamente a usabilidade em listas extensas.

---

## Impactos nos Dados

### O que √© preservado
- Geometrias
- Sistema de refer√™ncia espacial
- Campos existentes da camada destino
- Estado de edi√ß√£o da camada

### O que √© alterado
- Estrutura de campos da camada destino
- Conte√∫do dos atributos copiados

---

## Riscos e Controles

| Risco Potencial | Mitiga√ß√£o |
|----------------|-----------|
| Sobrescrita de campos | Confirma√ß√£o interativa |
| Altera√ß√£o indesejada | Altera√ß√µes n√£o salvas automaticamente |
| Erro de sele√ß√£o | UI com feedback visual |
| Listas grandes | Controles de sele√ß√£o em lote |

---

## Diferen√ßa em Rela√ß√£o a Abordagens Simples

Diferente de scripts diretos ou c√≥pias autom√°ticas, esta ferramenta:

- Permite sele√ß√£o manual e visual de campos
- Trata conflitos de forma controlada
- Integra drag & drop de camadas
- Mant√©m compatibilidade com QGIS 3.16+

---

## Poss√≠veis Evolu√ß√µes Futuras

- Exibi√ß√£o de pr√©via dos dados copiados
- Execu√ß√£o em background para grandes volumes
- Relat√≥rio detalhado de campos copiados
- Persist√™ncia de sele√ß√£o de atributos por camada

---

## Conclus√£o

A ferramenta **Copiar Atributos** oferece um fluxo robusto, seguro e alinhado √†s pr√°ticas profissionais do QGIS, equilibrando automa√ß√£o e controle manual.  
Sua arquitetura e UI foram projetadas para reutiliza√ß√£o em futuras ferramentas do **MTL Tools**, especialmente aquelas que envolvem sele√ß√£o de camadas e campos.
